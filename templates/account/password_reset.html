{% extends "account/base.html" %}
{% load i18n widget_tweaks %}

{% block title %}{% trans "Réinitialisation du mot de passe —  BAMU WELLBEING Foundation" %}{% endblock %}
{% block auth_width %}w-full max-w-xl lg:max-w-xl px-4{% endblock %}

{% block auth_heading %}
  <h1 class="text-3xl font-extrabold tracking-tight text-blue-700 dark:text-blue-300 text-center">
    {% trans "Réinitialisation du mot de passe" %}
  </h1>
  <p class="mt-2 text-sm text-slate-600 dark:text-slate-300/80 text-center">
    {% trans "Saisissez votre adresse email. Si un compte existe, vous recevrez un lien pour créer un nouveau mot de passe." %}
  </p>
{% endblock %}

{% block account_content %}

  {% if form.non_field_errors %}
    <div class="mb-4 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:bg-red-950/40 dark:text-red-200 dark:border-red-900/40" aria-live="polite">
      {{ form.non_field_errors|striptags }}
    </div>
  {% endif %}

  {# FORMULAIRE ULTRA-PLAT (pas de conteneur interne) #}
  <form method="post" action="{% url 'account_reset_password' %}" enctype="multipart/form-data" class="space-y-4" novalidate>
    {% csrf_token %}

    <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1">
      {% trans "Adresse email" %}
    </label>

    {{ form.email|add_class:"w-full rounded-xl border border-slate-300 bg-white/80 px-4 py-3 shadow-sm outline-none transition focus:border-blue-600 focus:ring-4 focus:ring-blue-100 dark:bg-white/10 dark:border-white/10 dark:focus:ring-blue-500/20"|attr:"autocomplete:email"|attr:"autofocus:autofocus"|attr:"aria-describedby:id_email_error" }}

    {% if form.email.errors %}
      <p id="id_email_error" class="mt-1 text-sm text-red-600">{{ form.email.errors|striptags }}</p>
    {% endif %}

    <button type="submit"
            class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-blue-600 px-4 py-2.5 font-semibold text-white hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/60">
      {% trans "Envoyer le lien de réinitialisation" %}
    </button>
  </form>

  <p class="mt-3 text-xs text-slate-500 dark:text-slate-400">
    {% trans "Pensez à vérifier votre dossier courrier indésirable (spam)." %}
  </p>

  <div class="my-5 h-px w-full bg-slate-200 dark:bg-white/10"></div>

{% endblock %}
